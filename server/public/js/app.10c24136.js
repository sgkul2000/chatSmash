(function(e){function t(t){for(var n,s,i=t[0],c=t[1],u=t[2],m=0,d=[];m<i.length;m++)s=i[m],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&d.push(a[s][0]),a[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);l&&l(t);while(d.length)d.shift()();return r.push.apply(r,u||[]),o()}function o(){for(var e,t=0;t<r.length;t++){for(var o=r[t],n=!0,i=1;i<o.length;i++){var c=o[i];0!==a[c]&&(n=!1)}n&&(r.splice(t--,1),e=s(s.s=o[0]))}return e}var n={},a={app:0},r=[];function s(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=e,s.c=n,s.d=function(e,t,o){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(o,n,function(t){return e[t]}.bind(null,n));return o},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=c;r.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"034f":function(e,t,o){"use strict";var n=o("85ec"),a=o.n(n);a.a},"56d7":function(e,t,o){"use strict";o.r(t);o("e260"),o("e6cf"),o("cca6"),o("a79d");var n=o("2b0e"),a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"app"}},[o("div",{attrs:{id:"nav"}},[o("router-link",{attrs:{to:"/"}},[e._v("Home")]),e._v(" | "),o("router-link",{attrs:{to:"/chat"}},[e._v("chat")])],1),o("router-view")],1)},r=[],s=(o("034f"),o("2877")),i={},c=Object(s["a"])(i,a,r,!1,null,null,null),u=c.exports,l=o("8c4f"),m=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"home"},[o("div",{staticClass:"container-fluid"},[o("div",{staticClass:"row text-center"},[o("div",{staticClass:"col-sm-5 mx-auto loginDialog"},[o("h1",[e._v("Login")]),o("b-form",{on:{submit:function(t){return t.preventDefault(),e.redirect(t)}}},[o("div",{staticClass:"goLeft"},[o("b-form-group",{attrs:{id:"input-group-1",label:"Username:","label-for":"input-1",description:"Enter a username of your choice"}},[o("b-form-input",{attrs:{id:"input-1",type:"text",required:"",placeholder:"Enter your Username"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),o("b-form-group",{attrs:{id:"input-group-2",label:"Name:","label-for":"input-2"}},[o("b-form-input",{attrs:{id:"input-2",type:"text",required:"",placeholder:"Enter name"},model:{value:e.form.nickname,callback:function(t){e.$set(e.form,"nickname",t)},expression:"form.nickname"}})],1)],1),o("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Submit")])],1)],1)])])])},d=[],f=(o("96cf"),o("1da1")),p=o("5530"),h=o("2f62"),v=(o("d3b7"),o("d4ec")),g=o("bee2"),b=o("1052"),k=o.n(b),w="https://shielded-beyond-17297.herokuapp.com/api/room/",R=function(){function e(){Object(v["a"])(this,e)}return Object(g["a"])(e,null,[{key:"getRoomList",value:function(){return new Promise((function(e,t){k.a.get(w).then((function(t){var o=t.data;e(o)})).catch((function(e){console.log(e),console.log(e.message),t(e)}))}))}},{key:"getSpecificRoom",value:function(e){var t=w+"getRoomList/"+e+"/";return new Promise((function(e,o){k.a.get(t).then((function(t){var o=t.data,n=o[0],a=n.rooms;e(a)})).catch((function(e){console.log(e),console.log("user not signed in"),o(e)}))}))}},{key:"getRoomChats",value:function(e){var t=w+e+"/";return new Promise((function(e,o){k.a.get(t).then((function(t){var o=t.data;e(o)})).catch((function(e){console.log(e),console.log(e.message),o(e)}))}))}},{key:"createRoom",value:function(e,t){var o=w+"newRoom/",n={user:e,roomName:t};return new Promise((function(e,t){k.a.post(o,n).then((function(t){console.log(t.status);var o=t.data;e(o)})).catch((function(e){console.log(e),t(e)}))}))}},{key:"joinRoom",value:function(e,t){var o=w+"join/",n={user:e,name:t};return new Promise((function(e,t){k.a.post(o,n).then((function(t){console.log(t.status);var o=t.data;e(o)})).catch((function(e){console.log(e),t(e)}))}))}},{key:"addMessage",value:function(e,t,o){var n=w+"newMessage/add/",a={username:e,roomName:t,text:o};return new Promise((function(e,t){k.a.post(n,a).then((function(t){console.log(t.status),console.log("Message acknowledged"),e()})).catch((function(e){console.log(e.message),console.log(e),t(e)}))}))}},{key:"deleteRoom",value:function(e){var t={roomName:e},o=w+"deleteRoom/";return new Promise((function(e,n){k.a.post(o,t).then((function(t){console.log(t.status),e()})).catch((function(e){console.log(e),n(e)}))}))}},{key:"userLogin",value:function(e,t){var o=w+"newUser/",n={name:e,nickname:t};return new Promise((function(e,t){k.a.post(o,n).then((function(t){console.log(t.status),e()})).catch((function(e){console.log(e),t(e)}))}))}}]),e}(),y=R,C={name:"Home",data:function(){return{form:{username:"",nickname:""}}},methods:Object(p["a"])({},Object(h["b"])(["loginUser"]),{redirect:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.userLogin(e.form.username,e.form.nickname);case 3:o={username:e.form.username,nickname:e.form.nickname},e.loginUser(o),e.form={username:"",nickname:""},e.$router.push("chat/"),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()}})},x=C,_=(o("cccb"),Object(s["a"])(x,m,d,!1,null,null,null)),N=_.exports,O=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"main"},[o("div",{staticClass:"test"},[o("div",{staticClass:"row mxheightset text-center mx-auto"},[o("div",{staticClass:"col-3 ml-auto mxheightset convBox px-0 heightSet"},[o("div",{staticClass:"heightSet"},[o("div",{staticClass:"listHeader"},[e._v("Conversations")]),e._l(e.roomListComp,(function(t,n){return o("b-list-group",{key:n,staticClass:"listGroup"},[o("b-list-group-item",{staticClass:"listGroupItem",on:{click:function(o){return e.roomUpdate(t)}}},[e._v(e._s(t))])],1)})),o("div",{staticClass:"newRoom"},[o("b-dropdown",{staticClass:"m-2",attrs:{id:"dropdown-right",right:"",text:"",variant:""},scopedSlots:e._u([{key:"button-content",fn:function(){return[o("i",{staticClass:"faso fas fa-plus"})]},proxy:!0}])},[o("b-dropdown-item",{directives:[{name:"b-modal",rawName:"v-b-modal.joinRoomModal",modifiers:{joinRoomModal:!0}}]},[e._v("Join room")]),o("b-dropdown-item",{directives:[{name:"b-modal",rawName:"v-b-modal.createRoomModal",modifiers:{createRoomModal:!0}}]},[e._v("Create Room")])],1)],1)],2)]),o("div",{staticClass:"col-8 col-md-7 mr-auto mxheightset px-0 chatPanel heightSet"},[o("div",{staticClass:"chatHeader"},[o("div",{staticClass:"name"},[e._v(" "+e._s(e.room)+" "),o("br"),o("div",{directives:[{name:"show",rawName:"v-show",value:e.typingVariable.roomName===e.room&&"Home"!==e.room,expression:"typingVariable.roomName === room && room !== 'Home'"}],staticClass:"typing"},[e._v(e._s(e.typingVariable.typeString))])]),o("div",{staticClass:"menu"},["Home"!==this.room?o("i",{directives:[{name:"b-modal",rawName:"v-b-modal.deleteModal",modifiers:{deleteModal:!0}}],staticClass:"faso fas fa-trash-alt"}):e._e()])]),o("div",{staticClass:"chatdivWrapper",attrs:{id:"chatwindow"}},e._l(e.roomForchats,(function(t,n){return o("div",{key:n,staticClass:"chatDiv"},[t.user===e.user.username&&"chat"===t.type?o("div",{staticClass:"RowR"},[o("div",{staticClass:"byYou"},[o("span",{},[o("div",{staticClass:"userName"},[e._v("You")]),e._v(" "+e._s(t.text)+" "),o("span",{staticClass:"date"},[e._v(e._s(e.dateParse(t.dateCreated)))])])])]):"chat"===t.type?o("div",{staticClass:"RowL"},[o("div",{staticClass:"byYou byFriend"},[o("span",{},[o("div",{staticClass:"userName"},[e._v(e._s(t.user))]),e._v(" "+e._s(t.text)+" "),o("span",{staticClass:"date"},[e._v(e._s(e.dateParse(t.dateCreated)))])])])]):e._e()])})),0),o("div",{staticClass:"chatFooter"},[o("b-input-group",{staticClass:"footerWrapper",attrs:{size:"sm",prepend:"",append:""}},[o("b-form-input",{staticClass:"inputBar",attrs:{id:"inputBar",placeholder:"Enter message..."},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.messageSubmitHandler(t)},input:e.typeHandler},model:{value:e.currentMessage,callback:function(t){e.currentMessage=t},expression:"currentMessage"}}),o("button",{staticClass:"goaRound",on:{click:e.messageSubmitHandler}},[o("i",{staticClass:"faso fas fa-paper-plane"})])],1)],1)])])]),o("div",{staticClass:"newRoomDiv"},[o("b-modal",{ref:"createRoomModal",attrs:{id:"createRoomModal",title:"Create Room","header-bg-variant":"dark","header-text-variant":"light","hide-header-close":!0,"ok-variant":"success","cancel-variant":"outline-danger","ok-title":"Create","cancel-title":"Cancel","button-size":"sm"},on:{show:e.resetModal,hidden:e.resetModal,ok:e.createNewRoom}},[o("b-form-group",{attrs:{id:"newRoom-group",label:"Enter New Room Name:","label-for":"newRoom-input"}},[o("b-form-input",{attrs:{id:"newRoom-input",required:"",placeholder:"Enter Room name..."},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.createNewRoom(t)}},model:{value:e.newRoomName,callback:function(t){e.newRoomName=t},expression:"newRoomName"}})],1)],1)],1),o("div",{staticClass:"joinRoomDiv"},[o("b-modal",{ref:"joinRoomModal",attrs:{id:"joinRoomModal",title:"Join Room","header-bg-variant":"dark","header-text-variant":"light","ok-variant":"success","hide-header-close":!0,"cancel-variant":"outline-danger","ok-title":"Join","cancel-title":"Cancel","button-size":"sm"},on:{show:e.resetModal,hidden:e.resetModal,ok:e.joinNewRoom}},[o("b-form-group",{attrs:{id:"joinRoom-group",label:"Enter Room Name:","label-for":"joinRoom-input"}},[o("b-form-input",{attrs:{id:"joinRoom-input",required:"",placeholder:"Search for an existing room..."},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.joinNewRoom(t)}},model:{value:e.searchRoomName,callback:function(t){e.searchRoomName=t},expression:"searchRoomName"}})],1),o("b-list-group",e._l(e.filteredList,(function(t,n){return o("div",{key:n,staticClass:"listItemsWrapper"},[o("b-list-group-item",{attrs:{href:"#",active:e.isIn(t.name)},on:{click:function(o){return e.joinSet(t.name)}}},[e._v(e._s(t.name))])],1)})),0)],1)],1),o("div",{staticClass:"deleteConfirm"},[o("b-modal",{ref:"deleteModal",attrs:{id:"deleteModal",title:"Confirm Deletion","header-bg-variant":"dark","header-text-variant":"light","ok-variant":"success","hide-header-close":!0,"cancel-variant":"outline-danger","ok-title":"Yes","cancel-title":"Cancel","button-size":"sm"},on:{ok:e.deleteRoom}},[e._v(" Are you sure you want to delete '"+e._s(e.room)+"' ? ")])],1)])},j=[],M=(o("4de4"),o("7db0"),o("caad"),o("b0c0"),o("2532"),{name:"chat",data:function(){return{newRoomName:"",typingVariable:{typeString:"",roomName:""},searchRoomName:"",pageLoaded:!1,allRooms:[],roomList:[],allInOne:[],room:"Home",currentMessage:"",typing:{user:"",roomName:""}}},sockets:{connect:function(){},rightbackatya:function(){},someonesTyping:function(e){this.typingDisplay(e)},newMessageBroadcast:function(e){this.newMessageHandler(e)},updateRoom:function(){this.loadAllInOne()}},watch:{roomForchats:function(){return this.autoScroll(),!0}},methods:{roomUpdate:function(e){this.room=e,setTimeout((function(){var e=document.getElementById("chatwindow"),t=e.scrollHeight;e.scrollTo(0,t)}),700),this.autoScroll()},deleteRoom:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var o,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.deleteRoom(e.room);case 3:e.$socket.emit("newRoomCreated"),o="Room Deleted",n="Room "+e.room+" was deleted successfully",e.makeToast(o,n),e.room="Home",e.loadAllInOne(),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},getRoomChatsList:function(e){var t=this.allInOne.filter((function(t){return t.roomName===e}));return t[0].chats},messageSubmitHandler:function(){var e=this.getRoomChatsList(this.room);e.push({user:this.user.username,type:"chat",text:this.currentMessage,dateCreated:new Date});var t={user:this.user.username,text:this.currentMessage,roomName:this.room};this.$socket.emit("newMessage",t),y.addMessage(this.user.username,this.room,this.currentMessage),this.currentMessage=""},newMessageHandler:function(e){if(this.roomList.includes(e.roomName)){this.makeToast(e.roomName,e.text);var t=this.getRoomChatsList(e.roomName);t.push({user:e.user,type:"chat",text:e.text,dateCreated:new Date})}},typeHandler:function(){var e={user:this.user.username,roomName:this.room,nickname:this.user.nickname};this.$socket.emit("typing",e)},typingDisplay:function(e){var t=this;this.typingVariable.typeString=e.nickname+" is typing...",this.typingVariable.roomName=e.roomName,setTimeout((function(){t.typingVariable={typeString:"",roomName:"",nickname:""}}),2e3)},autoScroll:function(){var e=document.getElementById("chatwindow"),t=e.scrollHeight;e.scrollTo(0,t)},makeToast:function(e,t){this.$bvToast.toast(t,{title:e,autoHideDelay:2e3,appendToast:!1})},joinNewRoom:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var o,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.$refs["joinRoomModal"].hide(),!e.roomList.includes(e.searchRoomName)){t.next=5;break}return e.makeToast("Oops!","You are already a part of the room!"),t.abrupt("return",null);case 5:if(e.allRoomListComp.includes(e.searchRoomName)){t.next=8;break}return e.makeToast("Error!","Choose a correct room name to join!"),t.abrupt("return",null);case 8:return o="Joined",t.next=11,y.joinRoom(e.user.username,e.searchRoomName);case 11:return n=t.sent,t.next=14,e.loadAllInOne();case 14:e.makeToast(o,n),t.next=21;break;case 17:t.prev=17,t.t0=t["catch"](0),console.log(t.t0),console.log(t.t0.message);case 21:case"end":return t.stop()}}),t,null,[[0,17]])})))()},createNewRoom:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var o,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.$refs["createRoomModal"].hide(),""!==e.newRoomName){t.next=5;break}return e.makeToast("Error!","Please enter a valid room name."),t.abrupt("return",null);case 5:return o="Room Created",t.next=8,y.createRoom(e.user.username,e.newRoomName);case 8:n=t.sent,e.loadAllInOne(),e.$socket.emit("newRoomCreated"),e.makeToast(o,n),t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](0),console.log(t.t0),console.log(t.t0.message);case 18:case"end":return t.stop()}}),t,null,[[0,14]])})))()},isIn:function(e){return this.roomList.includes(e)},auto_grow:function(){var e=document.getElementById("inputBar");e.style.height="5px",e.style.height=e.scrollHeight+"px"},joinSet:function(e){this.searchRoomName=e},resetModal:function(){this.newRoomName="",this.searchRoomName=""},loadAllInOne:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var o,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.allInOne=[],t.next=4,y.getRoomList();case 4:return e.allRooms=t.sent,t.next=7,y.getSpecificRoom(e.user.username);case 7:e.roomList=t.sent,o=0,n=e.roomList,o=0;case 11:if(!(o<n.length)){t.next=19;break}return t.next=14,y.getRoomChats(n[o]);case 14:a=t.sent,e.allInOne.push({roomName:n[o],chats:a});case 16:o++,t.next=11;break;case 19:t.next=24;break;case 21:t.prev=21,t.t0=t["catch"](0),console.log(t.t0);case 24:case"end":return t.stop()}}),t,null,[[0,21]])})))()},dateParse:function(e){var t=Date.parse(e),o=new Date(t).getHours(),n=new Date(t).getMinutes();return o+":"+n}},computed:Object(p["a"])({},Object(h["c"])(["user"]),{roomListComp:function(){return this.roomList},allRoomListComp:function(){var e=[],t=0;for(t=0;t<this.allRooms.length;t++)e.push(this.allRooms[t].name);return e},filteredList:function(){var e=this;return this.searchRoomName.length>1?this.allRooms.filter((function(t){return t.name.toLowerCase().includes(e.searchRoomName.toLowerCase())})):null},roomForchats:function(){if(!this.pageLoaded)return[];var e=this.allInOne,t=this.room;"Home"===t&&(t="team quarantine quack");var o=e.find((function(e){return e.roomName===t}));return"undefined"==typeof o?[]:o.chats}}),created:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{e.loadAllInOne()}catch(o){console.log(o.message)}case 1:case"end":return t.stop()}}),t)})))()},mounted:function(){this.pageLoaded=!0,this.autoScroll(),this.$socket.emit("hey")}}),L=M,S=(o("c129"),Object(s["a"])(L,O,j,!1,null,"848dd428",null)),H=S.exports;n["default"].use(l["a"]);var P=[{path:"/",name:"Home",component:N},{path:"/chat/",name:"Chat",component:H}],I=new l["a"]({mode:"history",base:"/",routes:P}),E=I,T={user:{username:"",nickname:""}},D={loginUser:function(e,t){var o=e.commit;o("updateUser",t)}},$={updateUser:function(e,t){e["user"]={username:t.username,nickname:t.nickname}}},U={},B=o("0e44"),A=o("a78e"),V=o.n(A);n["default"].use(h["a"]);var q=new h["a"].Store({state:T,plugins:[Object(B["a"])({getItem:function(e){return V.a.get(e)},setItem:function(e,t){return V.a.set(e,t,{espires:3,secure:!0})},removeItem:function(e){return V.a.remove(e)}})],actions:D,mutations:$,modules:U}),J=o("5f5b"),F=o("5132"),Y=o.n(F);o("f9e3"),o("2dd8"),o("8d76");n["default"].config.productionTip=!1,n["default"].use(J["a"]),n["default"].use(new Y.a({debug:!0,connection:"https://shielded-beyond-17297.herokuapp.com/",vuex:{store:q,actionPrefix:"SOCKET_",mutationPrefix:"SOCKET_"},options:{}})),new n["default"]({router:E,store:q,render:function(e){return e(u)}}).$mount("#app")},"5ced":function(e,t,o){},"85ec":function(e,t,o){},c129:function(e,t,o){"use strict";var n=o("d6b0"),a=o.n(n);a.a},cccb:function(e,t,o){"use strict";var n=o("5ced"),a=o.n(n);a.a},d6b0:function(e,t,o){}});
//# sourceMappingURL=app.10c24136.js.map